## Описание реализованных сервисов

Упаковываю в docker приложение взял ДЗ из Spring Security: ACL.
С небольшими изменениями - в качестве БД взял Postgres SQL и минимальное изменение настроек
для взаимодействия из контейнера с KeyCloak.

В ДЗ упаковал в Docker 4 сервиса
- Postgres SQL (**hw16-postgre**) - используется в качестве хранилища для прикладного сервера и для KeyCloak
- KeyCloak (**hw16-keycloak**) - используется для аутентификации пользователей прикладного решения
- BackEnd (**hw16-back**) - Back end spring boot java приложение
- FrontEnd (**hw16-front**) - Front end spring boot java/javascript приложение с которым происходит взаимодействие
пользователя
 
## Особенности запуска
При запуске контейнеров KeyCloak довольно долго инициализируется после запуска
для полноценной работы с приложением необходимо дождаться его запуска
в терминале
```
hw16-keycloak  | 2024-01-15 19:46:28,122 INFO  [io.quarkus] (main) Keycloak 20.0.3 on JVM (powered by Quarkus 2.13.6.Final) started in 69.436s. Listening on: http://0.0.0.0:8080
```
так же он должен быть доступен по URL [http://localhost:8090](http://localhost:8090)

## Запуск контейнеров
1. Производится из каталога docker
2. **build-app.bat** - сборка приложений
3. **create.bat** - docker compose up всех сервисов
4. Дополнительно
   - **start.bat** - docker compose start
   - **stop.bat** - docker compose stop
   - **remove.bat** - docker compose down + дополнительная очистка всего созданного

## Описание сервисов

### hw16-postgre
- При создании контейнера дополнительно в процессе инициализации создаю базы для KeyCloak и прикладного приложения
- Проброс порта 5432 наружу не обязателен, оставил для удобства, чтоб посмотреть БД снаружи

### hw16-keycloak
- Доступен снаружи по адресу  [http://localhost:8090](http://localhost:8090)
- Учетная запись администратора ***admin*** / ***admin***
- При инициализации сервера импортирую настройки (пользователи, realm, ...)

### hw16-back
- Доступен снаружи по адресу  [http://localhost:8082](http://localhost:8082)
- Все endpoint защищены, необходимо проходить аутентификацию через KeyCloack
- Из-за того что под Windows не совсем полноценно работает сеть, сделан
небольшой "хак" при обращении к KeyCloak (для списка сертификатов обращается
по внутреннему адресу, а издателя проверяет по внешнему. Переменные среды в build-containers.yml)

### hw16-front
- Доступен снаружи по адресу  [http://localhost:8080](http://localhost:8080)
- Учётные записи ***admin*** / ***admin*** и ***user*** / ***user***
